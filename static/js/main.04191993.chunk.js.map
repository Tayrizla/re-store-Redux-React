{"version":3,"sources":["components/BookListItem/BookListItem.js","components/bookstoreServiceContext/BookstoreServiceContext.js","components/hoc/withBookstoreService.js","utils/compose.js","components/spinner/Spinner.js","components/errorIndicator/ErrorIndicator.js","components/BookList/BookList.js","actions/index.js","components/ShoppingCartTable/ShoppingCartTable.js","components/pages/HomePage.js","components/pages/CartPage.js","components/ShopHeader/ShopHeader.js","components/app/App.js","components/errorboundry/ErrorBoundry.js","services/BookStoreService.js","reducers/index.js","store.js","index.js"],"names":["BookListItem","book","booksAdded","title","author","price","coverImage","className","src","alt","onClick","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","compose","funcs","comp","reduceRight","wrapped","f","Spinner","ErrorIndicator","BookList","books","map","key","id","BookListContainer","this","fetchBooks","loading","error","Component","connect","dispatch","ownProps","type","getBooks","then","data","payload","catch","err","items","cartItems","total","orderTotal","onIncrease","booksIncreased","onDecrease","booksDecreased","onDelete","booksDeleted","item","idx","name","count","HomePage","CartPage","state","numItems","reduce","a","b","to","App","role","path","component","exact","ErrorBoundry","hasError","setState","children","BookStoreService","Promise","resolve","setTimeout","initialState","changeCartItems","added","reducer","action","found","find","itemTotal","filter","decBook","store","createStore","BookstoreService","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.04191993.chunk.js","sourcesContent":["import React from 'react';\r\n\r\n\r\nimport './BookListItem.css'\r\n\r\nconst BookListItem = ({ book, booksAdded }) => {\r\n    const { title, author, price, coverImage } = book;\r\n    return (\r\n      <div className=\"book-list-item\">\r\n        <div className=\"book-cover\">\r\n          <img src={coverImage} alt=\"cover\" />\r\n        </div>\r\n        <div className=\"book-details\">\r\n          <h2 className=\"book-title\">{title}</h2>\r\n          <div className=\"book-author\">{author}</div>\r\n          <div className=\"book-price\">${price}</div>\r\n          <button \r\n          className=\"btn btn-info add-to-cart\"\r\n          onClick={booksAdded}>Add to cart</button>\r\n        </div>\r\n  \r\n      </div>\r\n    );\r\n  };\r\n  \r\nexport default BookListItem;","import React from 'react';\r\n\r\nconst {\r\n    Provider: BookstoreServiceProvider, \r\n    Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {BookstoreServiceProvider, BookstoreServiceConsumer}","import React from 'react';\r\nimport {BookstoreServiceConsumer} from '../bookstoreServiceContext/BookstoreServiceContext';\r\n// import BookStoreService from '../../services/BookStoreService';\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n\r\n    return (props) => {\r\n        return (\r\n            <BookstoreServiceConsumer>\r\n                {\r\n                    (bookstoreService) => {\r\n                       return <Wrapped {...props} bookstoreService={bookstoreService}/>\r\n                    }\r\n                }\r\n            </BookstoreServiceConsumer>\r\n        )\r\n\r\n    }\r\n}\r\n\r\nexport default withBookstoreService;","const compose = (...funcs) => (comp) => {\r\n    return funcs.reduceRight(\r\n      (wrapped, f) => f(wrapped), comp);\r\n  };\r\n  \r\n  export default compose;\r\n  ","import React from 'react';\r\n\r\nconst Spinner = () => {\r\n    return <div>Loading...</div>\r\n}\r\n\r\nexport default Spinner;","import React from 'react';\r\n\r\nconst ErrorIndicator = () => {\r\n    return <div>Error</div>\r\n}\r\n\r\nexport default ErrorIndicator;","import React, {Component} from 'react';\r\nimport BookListItem from '../BookListItem/BookListItem';\r\nimport {connect} from 'react-redux';\r\n\r\nimport './BookList.css'\r\n\r\nimport withBookstoreService from '../hoc/withBookstoreService';\r\nimport {booksLoaded, booksRequested, booksError, booksAdded} from '../../actions';\r\n// import { bindActionCreators } from 'redux';\r\nimport compose from '../../utils/compose';\r\nimport Spinner from '../spinner/Spinner';\r\nimport ErrorIndicator from '../errorIndicator/ErrorIndicator'\r\n\r\nconst BookList = ({books, booksAdded}) => {\r\n    return (\r\n        <ul className='book-list'>\r\n            {\r\n                books.map(book => {\r\n                    return (\r\n                        <li key={book.id}>\r\n                            <BookListItem \r\n                            booksAdded={() => booksAdded(book)}\r\n                            book={book}/>\r\n                        </li>\r\n                    )\r\n                })\r\n            }\r\n        </ul>\r\n    )\r\n}\r\n\r\nclass BookListContainer extends Component {\r\n\r\ncomponentDidMount() {\r\n    this.props.fetchBooks()\r\n}\r\n\r\n    render() {\r\n        const {books, loading, error, booksAdded} = this.props;\r\n\r\n        if (loading) return <Spinner/>;\r\n        if (error) return <ErrorIndicator/>\r\n        return <BookList \r\n        booksAdded={booksAdded}\r\n        books={books}/>\r\n    }\r\n}\r\n\r\nconst mapStateToProps = ({books, loading, error}) => {\r\n    return {books, loading, error}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n    return {\r\n        fetchBooks: () => {\r\n            dispatch(booksRequested());\r\n            ownProps.bookstoreService.getBooks()\r\n            .then((data) => dispatch(booksLoaded(data)))\r\n            .catch(err => dispatch(booksError(err)));\r\n        },\r\n        booksAdded: (book) => dispatch(booksAdded(book)),\r\n    }\r\n\r\n}\r\n\r\n// export default withBookstoreService()(\r\n//     connect(mapStateToProps, mapDispatchToProps)(BookList));\r\n\r\nexport default compose(\r\n    withBookstoreService(),\r\n    connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer)","const booksLoaded = (newBooks) => {\r\n  return {\r\n    type: \"BOOKS_LOADED\",\r\n    payload: newBooks,\r\n  };\r\n};\r\n\r\nconst booksRequested = () => {\r\n  return {\r\n    type: \"BOOKS_REQUESTED\",\r\n  };\r\n};\r\n\r\nconst booksError = (error) => {\r\n  return {\r\n    type: \"BOOKS_ERROR\",\r\n    error,\r\n  };\r\n};\r\n\r\nconst booksAdded = (book) => {\r\n  return {\r\n    type: \"BOOKS_ADDED\",\r\n    payload: book,\r\n  };\r\n};\r\n\r\nconst booksDeleted = (id) => {\r\n  return {\r\n    type: \"BOOKS_DELETED\",\r\n    payload: id,\r\n  };\r\n};\r\n\r\nconst booksIncreased = (id) => {\r\n  return {\r\n    type: \"BOOKS_INCREASED\",\r\n    payload: id,\r\n  };\r\n};\r\n\r\nconst booksDecreased = (id) => {\r\n  return {\r\n    type: \"BOOKS_DECREASED\",\r\n    payload: id,\r\n  };\r\n};\r\nexport {\r\n  booksLoaded,\r\n  booksRequested,\r\n  booksError,\r\n  booksAdded,\r\n  booksDeleted,\r\n  booksIncreased,\r\n  booksDecreased,\r\n};\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\n\r\nimport './ShoppingCartTable.css';\r\n\r\nimport {booksDeleted, booksIncreased, booksDecreased} from '../../actions'\r\n\r\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\r\n  const renderRow = (item, idx) => {\r\n    const { id, name, count, total } = item;\r\n    return (\r\n      <tr key={id}>\r\n        <td>{idx + 1}</td>\r\n        <td>{name}</td>\r\n        <td>{count}</td>\r\n        <td>${total}</td>\r\n        <td>\r\n          <button\r\n            onClick={() => onDelete(id)}\r\n            className=\"btn btn-outline-danger btn-sm float-right\">\r\n            <i className=\"fa fa-trash-o\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onIncrease(id)}\r\n            className=\"btn btn-outline-success btn-sm float-right\">\r\n            <i className=\"fa fa-plus-circle\" />\r\n          </button>\r\n          <button\r\n            onClick={() => onDecrease(id)}\r\n            className=\"btn btn-outline-warning btn-sm float-right\">\r\n            <i className=\"fa fa-minus-circle\" />\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"shopping-cart-table\">\r\n      <h2>Your Order</h2>\r\n      <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Item</th>\r\n            <th>Count</th>\r\n            <th>Price</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n        { items.map(renderRow) }\r\n        </tbody>\r\n      </table>\r\n\r\n      <div className=\"total\">\r\n        Total: ${total}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst mapStateToProps = ({ cartItems, orderTotal }) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    onIncrease: (id) => {\r\n      dispatch(booksIncreased(id));\r\n    },\r\n\r\n    onDecrease: (id) => {\r\n      dispatch(booksDecreased(id))\r\n    },\r\n\r\n    onDelete: (id) => {\r\n      dispatch(booksDeleted(id))\r\n    }\r\n  }\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable);\r\n","import React from 'react';\r\nimport BookList from '../BookList/BookList'\r\n\r\nimport ShoppingCartTable from '../ShoppingCartTable/ShoppingCartTable';\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <div>\r\n      <BookList />\r\n      <ShoppingCartTable />\r\n    </div>\r\n  );\r\n};\r\nexport default HomePage;","import React from 'react';\r\n\r\nconst CartPage = () => {\r\n    return <div>Cart Page</div>;\r\n}\r\n\r\nexport default CartPage;","import React from 'react';\r\nimport {Link} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nimport './ShopHeader.css';\r\n\r\nconst ShopHeader = ({ numItems, total, ...props }) => {\r\n  \r\n  return (\r\n    <header className=\"shop-header row\">\r\n      <Link to=\"/\">\r\n        <div className=\"logo text-dark\">ReStore</div>\r\n      </Link>\r\n      <Link to=\"/cart\">\r\n        <div className=\"shopping-cart\">\r\n          <i className=\"cart-icon fa fa-shopping-cart\" />\r\n          {numItems} items (${total})\r\n        </div>\r\n      </Link>\r\n    </header>\r\n  );\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  const quantity = state.cartItems.reduce((a, b) => a + b.count, 0)\r\n  \r\n  return {\r\n    numItems: quantity,\r\n    total: state.orderTotal\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(ShopHeader);\r\n","import React from 'react';\r\nimport './App.css';\r\nimport {Route, Switch} from 'react-router-dom';\r\nimport {HomePage, CartPage} from '../pages'\r\nimport ShopHeader from '../ShopHeader/ShopHeader';\r\n\r\n\r\nconst App = () => {\r\n    return (\r\n        <main role=\"main\" className=\"container\">\r\n            <ShopHeader/>\r\n            <Switch>\r\n                <Route\r\n                    path='/'\r\n                    component={HomePage}\r\n                    exact\r\n                />\r\n                <Route\r\n                    path='/cart'\r\n                    component={CartPage}\r\n                />\r\n            </Switch>\r\n        </main>\r\n    )\r\n}\r\n\r\nexport default App;","import React, {Component} from 'react';\r\n\r\nimport ErrorIndicator from '../errorIndicator/ErrorIndicator'\r\n\r\nclass ErrorBoundry extends Component {\r\n\r\n    state = {hasError: false}\r\n\r\n    componentDidCatch() {\r\n        this.setState({hasError: true})\r\n    }\r\n    render() {\r\n        if (this.state.hasError) {\r\n            return <ErrorIndicator/>\r\n        }\r\n        return this.props.children;\r\n    }\r\n}\r\n\r\nexport default ErrorBoundry;","class BookStoreService {\r\n   data = [\r\n    {\r\n      id: 3,\r\n      title: 'Production-Ready Microservices',\r\n      author: 'Susan J. Fowler',\r\n      price: 32,\r\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'},\r\n    {\r\n      id: 4,\r\n      title: 'Release It!',\r\n      author: 'Michael T. Nygard',\r\n      price: 45,\r\n      coverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'}\r\n  ];\r\n    getBooks() {\r\n        return new Promise((resolve) => {\r\n          setTimeout(() => {\r\n            resolve(this.data)\r\n          }, 1000)\r\n        })\r\n      }\r\n}\r\nexport default BookStoreService;","const initialState = {\r\n    books: [],\r\n    loading: true,\r\n    error: null,\r\n    cartItems: [],\r\n    orderTotal: 0\r\n}\r\n\r\nconst changeCartItems = (cartItems, id, price, added) => {\r\n    let items = [...cartItems].map(item => {\r\n        return item.id === id? {...item, count: (added? ++item.count: --item.count), \r\n            total: added? item.total + price: item.total - price}: item\r\n    })\r\n    return items;\r\n}\r\n\r\nconst reducer = (state=initialState, action) => {\r\n\r\n    switch (action.type) {\r\n        case 'BOOKS_LOADED':\r\n            return {\r\n                ...state,\r\n                books: action.payload,\r\n                loading: false,\r\n                error: null\r\n            }\r\n        case 'BOOKS_REQUESTED':\r\n            return {\r\n                ...state,\r\n                loading: true,\r\n                error: null\r\n            };\r\n        case 'BOOKS_ERROR':\r\n            return {\r\n                ...state,\r\n                books: [],\r\n                loading: false,\r\n                error: action.payload\r\n            }\r\n        case 'BOOKS_ADDED':\r\n            const {id, title, price} = action.payload;\r\n            const found = state.cartItems.find(item => item.id === id);\r\n            if (found) return {\r\n                ...state,\r\n                cartItems: changeCartItems(state.cartItems, id, price, true),\r\n                orderTotal: state.orderTotal + price\r\n            }\r\n            return {\r\n                ...state,\r\n                cartItems: [\r\n                    ...state.cartItems, \r\n                    {id, name: title, count: 1, total: price}\r\n                ],\r\n                orderTotal: state.orderTotal + price\r\n            }\r\n        case 'BOOKS_DELETED':\r\n            let itemTotal;\r\n            const items = state.cartItems.filter(item => {\r\n                if (action.payload === item.id) itemTotal = item.total;\r\n                return action.payload !== item.id})\r\n            return {\r\n                ...state,\r\n                cartItems: items,\r\n                orderTotal: state.orderTotal - itemTotal\r\n            }\r\n        case 'BOOKS_INCREASED': \r\n            let book = state.books.find(item => item.id === action.payload)\r\n            return {\r\n                ...state,\r\n                cartItems: changeCartItems(state.cartItems, book.id, book.price, true),\r\n                orderTotal: state.orderTotal + book.price\r\n            }\r\n        case 'BOOKS_DECREASED':\r\n            const decBook = state.books.find(item => item.id === action.payload)\r\n            return {\r\n                ...state,\r\n                cartItems: changeCartItems(state.cartItems, decBook.id, decBook.price, false),\r\n                orderTotal: state.orderTotal - decBook.price\r\n            }\r\n\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default reducer;\r\n\r\n","import {createStore} from 'redux';\r\n\r\nimport reducer from './reducers';\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {Provider} from 'react-redux';\r\nimport {BrowserRouter as Router} from 'react-router-dom';\r\n\r\nimport App from './components/app/App';\r\nimport ErrorBoundry from './components/errorboundry/ErrorBoundry'\r\nimport BookstoreService from './services/BookStoreService';\r\nimport {BookstoreServiceProvider} from './components/bookstoreServiceContext/BookstoreServiceContext'\r\n\r\nimport store from './store'\r\n\r\nconst bookstoreService = new BookstoreService();\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n      <ErrorBoundry>\r\n        <BookstoreServiceProvider value={bookstoreService}>\r\n          <Router>\r\n            <App/>\r\n          </Router>        \r\n        </BookstoreServiceProvider>\r\n      </ErrorBoundry>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n)\r\n\r\n"],"sourceRoot":""}